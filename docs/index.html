<!doctype html>
<html class="default" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="IE=edge" />
    <title>doc-test</title>
    <meta name="description" content="Documentation for doc-test" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="assets/style.css" />
    <link rel="stylesheet" href="assets/highlight.css" />
    <script defer src="assets/main.js"></script>
    <script async src="assets/icons.js" id="tsd-icons-script"></script>
    <script async src="assets/search.js" id="tsd-search-script"></script>
    <script async src="assets/navigation.js" id="tsd-nav-script"></script>
  </head>
  <body>
    <script>
      document.documentElement.dataset.theme =
        localStorage.getItem("tsd-theme") || "os";
      document.body.style.display = "none";
      setTimeout(
        () =>
          app ? app.showPage() : document.body.style.removeProperty("display"),
        500,
      );
    </script>
    <header class="tsd-page-toolbar">
      <div class="tsd-toolbar-contents container">
        <div class="table-cell" id="tsd-search" data-base=".">
          <div class="field">
            <label
              for="tsd-search-field"
              class="tsd-widget tsd-toolbar-icon search no-caption"
              ><svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <use href="assets/icons.svg#icon-search"></use></svg></label
            ><input type="text" id="tsd-search-field" aria-label="Search" />
          </div>
          <div class="field"><div id="tsd-toolbar-links"></div></div>
          <ul class="results">
            <li class="state loading">Preparing search index...</li>
            <li class="state failure">The search index is not available</li>
          </ul>
          <a href="index.html" class="title">doc-test</a>
        </div>
        <div class="table-cell" id="tsd-widgets">
          <a
            href="#"
            class="tsd-widget tsd-toolbar-icon menu no-caption"
            data-toggle="menu"
            aria-label="Menu"
            ><svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <use href="assets/icons.svg#icon-menu"></use></svg
          ></a>
        </div>
      </div>
    </header>
    <div class="container container-main">
      <div class="col-content">
        <div class="tsd-page-title"><h2>doc-test</h2></div>
        <div class="tsd-panel tsd-typography">
          <p>
            <a href="https://classroom.github.com/a/T5K9tzcv"
              ><img
                src="https://classroom.github.com/assets/deadline-readme-button-24ddc0f5d75046c5622901739e7c5dd533143b0c8e959d652212380cedb1ea36.svg"
                alt="Review Assignment Due Date"
            /></a>
          </p>
          <a
            id="md:práctica-10--aplicación-para-coleccionistas-de-cartas-magic-cliente-servidor"
            class="tsd-anchor"
          ></a>
          <h1>
            <a
              href="#md:práctica-10--aplicación-para-coleccionistas-de-cartas-magic-cliente-servidor"
              >PRÁCTICA 10 : Aplicación para coleccionistas de cartas magic
              Cliente-Servidor.</a
            >
          </h1>
          <p>
            <em
              >Nombre y apellidos:
              <a
                href="https://github.com/ManuelDavidGomezAlonso?tab=repositories,"
                title="Enlace Github"
                >Manuel David Gómez Alonso</a
              ></em
            >
          </p>
          <p><em>Asignatura: Desarrollo de Sistemas Informáticos (DSI)</em></p>
          <p>
            <a
              href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-ManuelDavidGomezAlonso?branch=main"
              ><img
                src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-ManuelDavidGomezAlonso/badge.svg?branch=main"
                alt="Coverage Status"
            /></a>
          </p>
          <p>
            <a
              href="https://ull-esit-inf-dsi-2324.github.io/prct09-fiilesystem-magic-app/"
              >Enunciado de la práctica 9</a
            >
          </p>
          <p>
            <a
              href="https://sonarcloud.io/project/overview?id=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-ManuelDavidGomezAlonso"
              >SonarCloud</a
            >
          </p>
          <a id="md:índice" class="tsd-anchor"></a>
          <h2><a href="#md:índice">Índice</a></h2>
          <ol>
            <li><a href="#md:resumen">Resumen</a></li>
            <li>
              <a href="#md:apartados">Apartados</a>
              <ul>
                <li>
                  <a href="#md:planteamiento-del-trabajo"
                    >Planteamiento del trabajo</a
                  >
                </li>
                <li><a href="#md:Uso-de-chalk">Uso de chalk</a></li>
                <li><a href="#md:Uso-de-fs">Uso de fs</a></li>
                <li><a href="#md:Uso-de-yargs">Uso de yargs</a></li>
              </ul>
            </li>
            <li><a href="#md:Uso-Servidor-Cliente">Uso Servidor-Cliente</a></li>
            <li>
              <a href="#md:Cambios-en-el-código-base"
                >Cambios en el código base</a
              >
            </li>
            <li><a href="#md:alternativas">Problemas</a></li>
            <li><a href="#md:referencias">Referencias</a></li>
            <li><a href="#md:anexos">Anexos</a></li>
          </ol>
          <a id="md:resumen" class="tsd-anchor"></a>
          <h2><a href="#md:resumen">Resumen</a></h2>
          <p>
            En esta práctica, se nos ha pedido un programa en
            <strong>TypeScript</strong> destinado a la coleccion de cartas
            Magic, básicamente crear una especie de albúm de estas.
          </p>
          <p>Algunas de las tareas previas requeridas fueron:</p>
          <ul>
            <li>
              <strong>Acepte la asignación</strong> de GitHub Classroom asociada
              a esta práctica.
            </li>
            <li>
              Aprenda a utilizar los paquetes <strong>yargs y chalk</strong>,
              aunque más abajo se ilustran ejemplos de uso.
            </li>
            <li>
              Familiarícese con el
              <strong
                >API síncrona proporcionada por Node.js para trabajar con el
                sistema de ficheros.</strong
              >
            </li>
          </ul>
          <p>Los requisitos de la &quot;app&quot; que se nos exigían fueron:</p>
          <ul>
            <li>
              <p>
                Las cartas magic deben de tener una forma similiar a la descrita
                en el guión, con los atributos:
              </p>
              <ul>
                <li>ID.</li>
                <li>Nombre.</li>
                <li>Coste de maná.</li>
                <li>Color.</li>
                <li>Linea de tipo.</li>
                <li>Rareza.</li>
                <li>Texto de reglas.</li>
                <li>Fuerza/Resistencia.</li>
                <li>Marcas de lealtad.</li>
                <li>Valor de mercado.</li>
              </ul>
            </li>
            <li>
              <p>
                Acciones que los usuarios podrán ejecutar sobre su colección de
                cartas:
              </p>
              <ul>
                <li>Añadir.</li>
                <li>Modificar.</li>
                <li>Eliminar.</li>
                <li>Listar.</li>
                <li>Mostrar.</li>
                <li>Modificar por campo (Añadida).</li>
              </ul>
            </li>
            <li>
              <p>
                Guardaremos mediante un sistema de ficheros JSON las cartas
                magic del usuario hacinendo la aplicación persistente.
              </p>
            </li>
          </ul>
          <blockquote>
            <p>
              <strong><a href="#md:índice">Volver al índice</a></strong>
            </p>
          </blockquote>
          <a id="md:apartados" class="tsd-anchor"></a>
          <h2><a href="#md:apartados">Apartados</a></h2>
          <ul>
            <li>
              <a id="md:planteamiento-del-trabajo" class="tsd-anchor"></a>
              <h3>
                <a href="#md:planteamiento-del-trabajo"
                  >Planteamiento del trabajo</a
                >
              </h3>
            </li>
          </ul>
          <p>
            El plateamiento inicial sin conocer el API síncrono para el trabajo
            con un sistema de ficheros, fue como en prácticas anteriores, una
            clase que implemente las caracteríticas de las cartas magic y otra
            clase que posee un array de estos objetos, con las diferentes
            funciones que se podrán hacer sobre él.
          </p>
          <p>
            Una vez comprendida la API, nos damos cuenta de que el array podrá
            ser la misma carpeta donde se guardan los ficheros JSON de cada
            magicCard. Para conseguir esto haremos un clase que implemente los
            métodos que cubren las funcionalidades que debe de tener el usuario,
            y gestionaremos los objetos mediante los diferentes archivos JSON.
          </p>
          <pre><code class="language-typescript"><span class="hl-0">/**</span><br/><span class="hl-0"> * </span><span class="hl-1">@fileoverview</span><span class="hl-0"> jsonController.ts - Controla las acciones sobre los Json que representan las cartas de Magic.</span><br/><span class="hl-0"> */</span><br/><br/><span class="hl-2">import</span><span class="hl-3"> </span><span class="hl-1">*</span><span class="hl-3"> </span><span class="hl-2">as</span><span class="hl-3"> </span><span class="hl-4">fs</span><span class="hl-3"> </span><span class="hl-2">from</span><span class="hl-3"> </span><span class="hl-5">&quot;fs&quot;</span><span class="hl-3">;</span><br/><span class="hl-2">import</span><span class="hl-3"> { </span><span class="hl-4">magicCard</span><span class="hl-3"> } </span><span class="hl-2">from</span><span class="hl-3"> </span><span class="hl-5">&quot;./magiCard.js&quot;</span><span class="hl-3">;</span><br/><span class="hl-2">import</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3"> </span><span class="hl-2">from</span><span class="hl-3"> </span><span class="hl-5">&quot;chalk&quot;</span><span class="hl-3">;</span><br/><br/><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">directorioUsuario</span><span class="hl-3"> = </span><span class="hl-5">`./src/usuarios/</span><span class="hl-1">${</span><span class="hl-4">process</span><span class="hl-7">.</span><span class="hl-4">env</span><span class="hl-7">.</span><span class="hl-6">USER</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">;</span><br/><br/><span class="hl-0">/**</span><br/><span class="hl-0"> * Clase jsonCards, implementa los métodos para añadir, eliminar, mostrar, modificar y mostrar todas las cartas de un usuario.</span><br/><span class="hl-0"> */</span><br/><span class="hl-2">export</span><span class="hl-3"> </span><span class="hl-1">class</span><span class="hl-3"> </span><span class="hl-8">jsonCards</span><span class="hl-3"> {</span><br/><span class="hl-3">  </span><span class="hl-0">/**</span><br/><span class="hl-0">   * </span><span class="hl-1">@brief</span><span class="hl-0"> Constructor de la clase jsonCards.</span><br/><span class="hl-0">   * Se verifica si existe el directorio del usuario, si no existe se crea.</span><br/><span class="hl-0">   */</span><br/><span class="hl-3">  </span><span class="hl-1">constructor</span><span class="hl-3">() {</span><br/><span class="hl-3">    </span><span class="hl-2">if</span><span class="hl-3"> (!</span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">existsSync</span><span class="hl-3">(</span><span class="hl-4">directorioUsuario</span><span class="hl-3">)) {</span><br/><span class="hl-3">      </span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">mkdirSync</span><span class="hl-3">(</span><span class="hl-4">directorioUsuario</span><span class="hl-3">);</span><br/><span class="hl-3">    }</span><br/><span class="hl-3">  }</span><br/><br/><span class="hl-3">  </span><span class="hl-0">/**</span><br/><span class="hl-0">   * </span><span class="hl-1">@brief</span><span class="hl-0"> Añade una carta al directorio del usuario.</span><br/><span class="hl-0">   * </span><span class="hl-1">@param</span><span class="hl-0"> </span><span class="hl-4">card</span><span class="hl-0"> Carta a añadir.</span><br/><span class="hl-0">   */</span><br/><span class="hl-3">  </span><span class="hl-9">add</span><span class="hl-3">(</span><span class="hl-4">card</span><span class="hl-3">: </span><span class="hl-8">magicCard</span><span class="hl-3">) {</span><br/><span class="hl-3">    </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">existsSync</span><span class="hl-3">(</span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">id_</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">)) {</span><br/><span class="hl-3">      </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">`Card already exists in </span><span class="hl-1">${</span><span class="hl-4">process</span><span class="hl-7">.</span><span class="hl-4">env</span><span class="hl-7">.</span><span class="hl-6">USER</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">    }</span><br/><span class="hl-3">    </span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">writeFileSync</span><span class="hl-3">(</span><br/><span class="hl-3">      </span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">id_</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">,</span><br/><span class="hl-3">      </span><span class="hl-6">JSON</span><span class="hl-3">.</span><span class="hl-9">stringify</span><span class="hl-3">(</span><span class="hl-4">card</span><span class="hl-3">),</span><br/><span class="hl-3">    );</span><br/><span class="hl-3">    </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">green</span><span class="hl-3">(</span><span class="hl-5">&quot;Card added&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">  }</span><br/><br/><span class="hl-3">  </span><span class="hl-0">/**</span><br/><span class="hl-0">   * </span><span class="hl-1">@brief</span><span class="hl-0"> Elimina una carta del directorio del usuario.</span><br/><span class="hl-0">   * </span><span class="hl-1">@param</span><span class="hl-0"> </span><span class="hl-4">cardID</span><span class="hl-0"> ID de la carta a eliminar.</span><br/><span class="hl-0">   */</span><br/><span class="hl-3">  </span><span class="hl-9">delete</span><span class="hl-3">(</span><span class="hl-4">cardID</span><span class="hl-3">: </span><span class="hl-8">number</span><span class="hl-3">) {</span><br/><span class="hl-3">    </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">existsSync</span><span class="hl-3">(</span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">cardID</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">)) {</span><br/><span class="hl-3">      </span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">unlinkSync</span><span class="hl-3">(</span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">cardID</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">);</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">green</span><span class="hl-3">(</span><span class="hl-5">&quot;Card deleted&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">    }</span><br/><span class="hl-3">  }</span><br/><br/><span class="hl-3">  </span><span class="hl-0">/**</span><br/><span class="hl-0">   * </span><span class="hl-1">@brief</span><span class="hl-0"> Muestra una carta del directorio del usuario.</span><br/><span class="hl-0">   * </span><span class="hl-1">@param</span><span class="hl-0"> </span><span class="hl-4">showIDCard</span><span class="hl-0"> ID de la carta a mostrar.</span><br/><span class="hl-0">   */</span><br/><span class="hl-3">  </span><span class="hl-9">showCard</span><span class="hl-3">(</span><span class="hl-4">showIDCard</span><span class="hl-3">: </span><span class="hl-8">number</span><span class="hl-3">) {</span><br/><span class="hl-3">    </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">filePath</span><span class="hl-3"> = </span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">showIDCard</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">;</span><br/><span class="hl-3">    </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">existsSync</span><span class="hl-3">(</span><span class="hl-4">filePath</span><span class="hl-3">)) {</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">green</span><span class="hl-3">(</span><span class="hl-5">&quot;Showing card&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">cardData</span><span class="hl-3"> = </span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">readFileSync</span><span class="hl-3">(</span><span class="hl-4">filePath</span><span class="hl-3">, </span><span class="hl-5">&quot;utf-8&quot;</span><span class="hl-3">);</span><br/><span class="hl-3">      </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">card</span><span class="hl-3"> = </span><span class="hl-6">JSON</span><span class="hl-3">.</span><span class="hl-9">parse</span><span class="hl-3">(</span><span class="hl-4">cardData</span><span class="hl-3">);</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`ID: </span><span class="hl-1">${</span><span class="hl-4">showIDCard</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Name: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">name_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Mana Cost: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">manaCost_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Color: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">color_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Type: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">type_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Rare: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">rare_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Rules: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">rules_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Loyalty: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">loyalty_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Value: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">value_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">strRes_</span><span class="hl-3">) {</span><br/><span class="hl-3">        </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Strength/Resistance: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">strRes_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      }</span><br/><span class="hl-3">    } </span><span class="hl-2">else</span><span class="hl-3"> {</span><br/><span class="hl-3">      </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-5">`Card not found with ID </span><span class="hl-1">${</span><span class="hl-4">showIDCard</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">    }</span><br/><span class="hl-3">  }</span><br/><br/><span class="hl-3">  </span><span class="hl-0">/**</span><br/><span class="hl-0">   * </span><span class="hl-1">@brief</span><span class="hl-0"> Actualiza una carta del directorio del usuario, lo que quiere decir que la carta debe existir.</span><br/><span class="hl-0">   * </span><span class="hl-1">@param</span><span class="hl-0"> </span><span class="hl-4">card</span><span class="hl-0"> Carta a actualizar.</span><br/><span class="hl-0">   */</span><br/><span class="hl-3">  </span><span class="hl-9">update</span><span class="hl-3">(</span><span class="hl-4">card</span><span class="hl-3">: </span><span class="hl-8">magicCard</span><span class="hl-3">) {</span><br/><span class="hl-3">    </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">existsSync</span><span class="hl-3">(</span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">id_</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">)) {</span><br/><span class="hl-3">      </span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">writeFileSync</span><span class="hl-3">(</span><br/><span class="hl-3">        </span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">id_</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-6">JSON</span><span class="hl-3">.</span><span class="hl-9">stringify</span><span class="hl-3">(</span><span class="hl-4">card</span><span class="hl-3">),</span><br/><span class="hl-3">      );</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">green</span><span class="hl-3">(</span><span class="hl-5">&quot;Card updated&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">    } </span><span class="hl-2">else</span><span class="hl-3"> {</span><br/><span class="hl-3">      </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">`Card not found in </span><span class="hl-1">${</span><span class="hl-4">process</span><span class="hl-7">.</span><span class="hl-4">env</span><span class="hl-7">.</span><span class="hl-6">USER</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">    }</span><br/><span class="hl-3">  }</span><br/><br/><span class="hl-3">  </span><span class="hl-0">/**</span><br/><span class="hl-0">   * </span><span class="hl-1">@breif</span><span class="hl-0"> Modifica una propiedad de una carta existente.</span><br/><span class="hl-0">   * </span><span class="hl-1">@param</span><span class="hl-0"> </span><span class="hl-4">cardID</span><span class="hl-0"> Id de la carta a modificar.</span><br/><span class="hl-0">   * </span><span class="hl-1">@param</span><span class="hl-0"> </span><span class="hl-4">valueToChange</span><span class="hl-0"> Campo a modificar.</span><br/><span class="hl-0">   * </span><span class="hl-1">@param</span><span class="hl-0"> </span><span class="hl-4">newValue</span><span class="hl-0"> Nuevo valor del campo.</span><br/><span class="hl-0">   * Se verifica que la carta exista y que el campo a modificar exista en la carta.</span><br/><span class="hl-0">   */</span><br/><span class="hl-3">  </span><span class="hl-9">modify</span><span class="hl-3">(</span><span class="hl-4">cardID</span><span class="hl-3">: </span><span class="hl-8">number</span><span class="hl-3">, </span><span class="hl-4">valueToChange</span><span class="hl-3">: </span><span class="hl-8">string</span><span class="hl-3">, </span><span class="hl-4">newValue</span><span class="hl-3">: </span><span class="hl-8">string</span><span class="hl-3"> | </span><span class="hl-8">number</span><span class="hl-3">) {</span><br/><span class="hl-3">    </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">existsSync</span><span class="hl-3">(</span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">cardID</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">)) {</span><br/><span class="hl-3">      </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">card</span><span class="hl-3"> = </span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">readFileSync</span><span class="hl-3">(</span><br/><span class="hl-3">        </span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">cardID</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-5">&quot;utf-8&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">      );</span><br/><span class="hl-3">      </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">cardObj</span><span class="hl-3"> = </span><span class="hl-6">JSON</span><span class="hl-3">.</span><span class="hl-9">parse</span><span class="hl-3">(</span><span class="hl-4">card</span><span class="hl-3">);</span><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">cardObj</span><span class="hl-3">[</span><span class="hl-4">valueToChange</span><span class="hl-3">] !== </span><span class="hl-1">undefined</span><span class="hl-3">) {</span><br/><span class="hl-3">        </span><span class="hl-4">cardObj</span><span class="hl-3">[</span><span class="hl-4">valueToChange</span><span class="hl-3">] = </span><span class="hl-4">newValue</span><span class="hl-3">;</span><br/><span class="hl-3">        </span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">writeFileSync</span><span class="hl-3">(</span><br/><span class="hl-3">          </span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">cardID</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">,</span><br/><span class="hl-3">          </span><span class="hl-6">JSON</span><span class="hl-3">.</span><span class="hl-9">stringify</span><span class="hl-3">(</span><span class="hl-4">cardObj</span><span class="hl-3">),</span><br/><span class="hl-3">        );</span><br/><span class="hl-3">        </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">green</span><span class="hl-3">(</span><span class="hl-5">&quot;Card modified&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">      } </span><span class="hl-2">else</span><span class="hl-3"> {</span><br/><span class="hl-3">        </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">&quot;Property not found in object magicCard&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">      }</span><br/><span class="hl-3">    } </span><span class="hl-2">else</span><span class="hl-3"> {</span><br/><span class="hl-3">      </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">`Card not found in </span><span class="hl-1">${</span><span class="hl-4">process</span><span class="hl-7">.</span><span class="hl-4">env</span><span class="hl-7">.</span><span class="hl-6">USER</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">    }</span><br/><span class="hl-3">  }</span><br/><br/><span class="hl-3">  </span><span class="hl-0">/**</span><br/><span class="hl-0">   * </span><span class="hl-1">@brief</span><span class="hl-0"> Muestra todas las cartas del directorio del usuario.</span><br/><span class="hl-0">   * Se leen todos los archivos del directorio del usuario y se muestran.</span><br/><span class="hl-0">   */</span><br/><span class="hl-3">  </span><span class="hl-9">showAllCards</span><span class="hl-3">() {</span><br/><span class="hl-3">    </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">cards</span><span class="hl-3"> = </span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">readdirSync</span><span class="hl-3">(</span><span class="hl-4">directorioUsuario</span><span class="hl-3">);</span><br/><span class="hl-3">    </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">cardsArray</span><span class="hl-3">: </span><span class="hl-8">magicCard</span><span class="hl-3">[] = [];</span><br/><span class="hl-3">    </span><span class="hl-4">cards</span><span class="hl-3">.</span><span class="hl-9">forEach</span><span class="hl-3">((</span><span class="hl-4">card</span><span class="hl-3">) </span><span class="hl-1">=&gt;</span><span class="hl-3"> {</span><br/><span class="hl-3">      </span><span class="hl-4">cardsArray</span><span class="hl-3">.</span><span class="hl-9">push</span><span class="hl-3">(</span><br/><span class="hl-3">        </span><span class="hl-6">JSON</span><span class="hl-3">.</span><span class="hl-9">parse</span><span class="hl-3">(</span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">readFileSync</span><span class="hl-3">(</span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">, </span><span class="hl-5">&quot;utf-8&quot;</span><span class="hl-3">)),</span><br/><span class="hl-3">      );</span><br/><span class="hl-3">    });</span><br/><span class="hl-3">    </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">green</span><span class="hl-3">(</span><span class="hl-5">&quot;Showing cards&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">    </span><span class="hl-4">cardsArray</span><span class="hl-3">.</span><span class="hl-9">forEach</span><span class="hl-3">((</span><span class="hl-4">card</span><span class="hl-3">) </span><span class="hl-1">=&gt;</span><span class="hl-3"> {</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><br/><span class="hl-3">        </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><br/><span class="hl-3">          </span><span class="hl-5">&quot;-----------------------------------------------------------------------------------------------------------------&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        ),</span><br/><span class="hl-3">      );</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`ID: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">id_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Name: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">name_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Mana Cost: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">manaCost_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Color: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">color_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Type: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">typo_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Rare: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">rare_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Rules: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">rules_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Loyalty: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">loyalty_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Value: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">value_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">strRes_</span><span class="hl-3">) {</span><br/><span class="hl-3">        </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Strength/Resistance: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">strRes_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">      }</span><br/><span class="hl-3">    });</span><br/><span class="hl-3">  }</span><br/><span class="hl-3">}</span><br/>
</code><button>Copy</button></pre>
          <p>
            <em
              >El uso de <strong>fs</strong> y <strong>chalk</strong> lo
              explicaremos en apartados posteriores.</em
            >
          </p>
          <blockquote>
            <p>
              <strong><a href="#md:índice">Volver al índice</a></strong>
            </p>
          </blockquote>
          <ul>
            <li>
              <a id="md:uso-de-chalk" class="tsd-anchor"></a>
              <h3><a href="#md:uso-de-chalk">Uso de chalk</a></h3>
            </li>
          </ul>
          <p>
            Usamos chalk para dar formato a la salida de errores y por consola
            en nuestro caso, el uso es simple.
          </p>
          <pre><code class="language-typescript"><br/><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`ID: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">id_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/>
</code><button>Copy</button></pre>
          <blockquote>
            <p>
              <strong><a href="#md:índice">Volver al índice</a></strong>
            </p>
          </blockquote>
          <ul>
            <li>
              <a id="md:uso-de-fs" class="tsd-anchor"></a>
              <h3><a href="#md:uso-de-fs">Uso de fs</a></h3>
            </li>
          </ul>
          <p>
            Buscabamos tener una &quot;aplicación&quot; persistente, lo hemos
            conseguido mediante el uso de esta API.
          </p>
          <pre><code class="language-typescript"><br/><span class="hl-3">  </span><span class="hl-9">constructor</span><span class="hl-3">() {</span><br/><span class="hl-3">    </span><span class="hl-2">if</span><span class="hl-3"> (!</span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">existsSync</span><span class="hl-3">(</span><span class="hl-4">directorioUsuario</span><span class="hl-3">)) {</span><br/><span class="hl-3">      </span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">mkdirSync</span><span class="hl-3">(</span><span class="hl-4">directorioUsuario</span><span class="hl-3">);</span><br/><span class="hl-3">    }</span><br/><span class="hl-3">  }</span><br/>
</code><button>Copy</button></pre>
          <p>
            Vemos como en el constructor de la clase compobamos si el usuario
            tiene o no un directorio para almacenar sus cartas.
          </p>
          <ul>
            <li>
              <p>
                <strong>fs.existsSync</strong> nos indicará si existe o no con
                un boleano.
              </p>
            </li>
            <li>
              <p>
                <strong>fs.mkdirSync</strong> crea los directorios necesarios.
              </p>
            </li>
            <li>
              <p>
                En el guión se nos pide poner el nombre de usuario por comandos
                mediante yargs (Hablaremos sobre esto posteriormete), sin
                embargo he decidido implementar la creación de la siguiente
                manera:
              </p>
            </li>
          </ul>
          <pre><code class="language-typescript"><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">directorioUsuario</span><span class="hl-3"> = </span><span class="hl-5">`./src/usuarios/</span><span class="hl-1">${</span><span class="hl-4">process</span><span class="hl-7">.</span><span class="hl-4">env</span><span class="hl-7">.</span><span class="hl-6">USER</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">;</span>
</code><button>Copy</button></pre>
          <p>
            Donde obtendremos el nombre del usuario que ejecuta el programa
            automáticamente.
          </p>
          <p>
            Siguiendo con los conceptos de fs, vamos a echar un vistazo a la
            función add.
          </p>
          <pre><code class="language-typescript"><span class="hl-3">  </span><span class="hl-9">add</span><span class="hl-3">(</span><span class="hl-4">card</span><span class="hl-3">: </span><span class="hl-4">magicCard</span><span class="hl-3">) {</span><br/><span class="hl-3">   </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">existsSync</span><span class="hl-3">(</span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">id_</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">)) {</span><br/><span class="hl-3">     </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">`Card already exists in </span><span class="hl-1">${</span><span class="hl-4">process</span><span class="hl-7">.</span><span class="hl-4">env</span><span class="hl-7">.</span><span class="hl-6">USER</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">   }</span><br/><span class="hl-3">   </span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">writeFileSync</span><span class="hl-3">(</span><br/><span class="hl-3">     </span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">id_</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">,</span><br/><span class="hl-3">     </span><span class="hl-6">JSON</span><span class="hl-3">.</span><span class="hl-9">stringify</span><span class="hl-3">(</span><span class="hl-4">card</span><span class="hl-3">),</span><br/><span class="hl-3">   );</span><br/><span class="hl-3">   </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">green</span><span class="hl-3">(</span><span class="hl-5">&quot;Card added&quot;</span><span class="hl-3">));</span><br/><span class="hl-3"> }</span>
</code><button>Copy</button></pre>
          <ul>
            <li>
              <strong>fs.writeFileSync</strong> nos sirve para escribir en un
              archivo, deberemos pasar su ruta y lo que queremos escribir en el.
            </li>
            <li>
              <strong>JSON.stringfy(card)</strong> Coge un objeto y lo convierte
              en una cadena json.
            </li>
          </ul>
          <p>
            En la función delete, se utiliza
            <code>fs.unlinkSync(</code>${directorioUsuario}/${cardID}.json<code
              >);</code
            >
            para borrar el archivo seleccionado por el usuario.
          </p>
          <p>
            Por último, finalizando con este apartado veo necesario analizar la
            función propia modify.
          </p>
          <pre><code class="language-typescript"><span class="hl-3">  </span><span class="hl-9">modify</span><span class="hl-3">(</span><span class="hl-4">cardID</span><span class="hl-3">: </span><span class="hl-4">number</span><span class="hl-3">, </span><span class="hl-4">valueToChange</span><span class="hl-3">: </span><span class="hl-4">string</span><span class="hl-3">, </span><span class="hl-4">newValue</span><span class="hl-3">: </span><span class="hl-4">string</span><span class="hl-3"> | </span><span class="hl-4">number</span><span class="hl-3">) {</span><br/><span class="hl-3">   </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">existsSync</span><span class="hl-3">(</span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">cardID</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">)) {</span><br/><span class="hl-3">     </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">card</span><span class="hl-3"> = </span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">readFileSync</span><span class="hl-3">(</span><br/><span class="hl-3">       </span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">cardID</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">,</span><br/><span class="hl-3">       </span><span class="hl-5">&quot;utf-8&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">     );</span><br/><span class="hl-3">     </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">cardObj</span><span class="hl-3"> = </span><span class="hl-6">JSON</span><span class="hl-3">.</span><span class="hl-9">parse</span><span class="hl-3">(</span><span class="hl-4">card</span><span class="hl-3">);</span><br/><span class="hl-3">     </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">cardObj</span><span class="hl-3">[</span><span class="hl-4">valueToChange</span><span class="hl-3">] !== </span><span class="hl-1">undefined</span><span class="hl-3">) {</span><br/><span class="hl-3">       </span><span class="hl-4">cardObj</span><span class="hl-3">[</span><span class="hl-4">valueToChange</span><span class="hl-3">] = </span><span class="hl-4">newValue</span><span class="hl-3">;</span><br/><span class="hl-3">       </span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">writeFileSync</span><span class="hl-3">(</span><br/><span class="hl-3">         </span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">cardID</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">,</span><br/><span class="hl-3">         </span><span class="hl-6">JSON</span><span class="hl-3">.</span><span class="hl-9">stringify</span><span class="hl-3">(</span><span class="hl-4">cardObj</span><span class="hl-3">),</span><br/><span class="hl-3">       );</span><br/><span class="hl-3">       </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">green</span><span class="hl-3">(</span><span class="hl-5">&quot;Card modified&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">     } </span><span class="hl-2">else</span><span class="hl-3"> {</span><br/><span class="hl-3">       </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">&quot;Property not found in object magicCard&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">     }</span><br/><span class="hl-3">   } </span><span class="hl-2">else</span><span class="hl-3"> {</span><br/><span class="hl-3">     </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">`Card not found in </span><span class="hl-1">${</span><span class="hl-4">process</span><span class="hl-7">.</span><span class="hl-4">env</span><span class="hl-7">.</span><span class="hl-6">USER</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">   }</span><br/><span class="hl-3"> }</span>
</code><button>Copy</button></pre>
          <ul>
            <li>
              <strong>fs.readFileSync</strong> Devuleve el contenido de un
              fichero.
            </li>
            <li>
              <strong>JSON.parse</strong> Función opuesta a stringfy, convierte
              una cadena en un objeto.
            </li>
          </ul>
          <p>
            Esta función la he añadido para probar el código y porque el usuario
            no siempre querrá editar la carta completa, entonces esta función te
            da la opción de hacerlo por campos.
          </p>
          <blockquote>
            <p>
              <strong><a href="#md:índice">Volver al índice</a></strong>
            </p>
          </blockquote>
          <ul>
            <li>
              <a id="md:uso-de-yargs" class="tsd-anchor"></a>
              <h3><a href="#md:uso-de-yargs">Uso de yargs</a></h3>
            </li>
          </ul>
          <p>
            El uso de esta biblioteca, nos permitirá pasar parámetros a
            funciones mediante la línea de comandos.
          </p>
          <pre><code class="language-typescript"><span class="hl-3">.</span><span class="hl-9">command</span><span class="hl-3">(</span><br/><span class="hl-3">    </span><span class="hl-5">&quot;add&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">    </span><span class="hl-5">&quot;Adds a card to the collection&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">    {</span><br/><span class="hl-3">      </span><span class="hl-4">id:</span><span class="hl-3"> {</span><br/><span class="hl-3">        </span><span class="hl-4">description:</span><span class="hl-3"> </span><span class="hl-5">&quot;Card ID&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">type:</span><span class="hl-3"> </span><span class="hl-5">&quot;number&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">demandOption:</span><span class="hl-3"> </span><span class="hl-1">true</span><span class="hl-3">,</span><br/><span class="hl-3">      },</span><br/><span class="hl-3">      </span><span class="hl-4">name:</span><span class="hl-3"> {</span><br/><span class="hl-3">        </span><span class="hl-4">description:</span><span class="hl-3"> </span><span class="hl-5">&quot;card name&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">type:</span><span class="hl-3"> </span><span class="hl-5">&quot;string&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">demandOption:</span><span class="hl-3"> </span><span class="hl-1">true</span><span class="hl-3">,</span><br/><span class="hl-3">      },</span><br/><span class="hl-3">      </span><span class="hl-4">manaCost:</span><span class="hl-3"> {</span><br/><span class="hl-3">        </span><span class="hl-4">description:</span><span class="hl-3"> </span><span class="hl-5">&quot;Mana cost&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">type:</span><span class="hl-3"> </span><span class="hl-5">&quot;number&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">demandOption:</span><span class="hl-3"> </span><span class="hl-1">true</span><span class="hl-3">,</span><br/><span class="hl-3">      },</span><br/><span class="hl-3">      </span><span class="hl-4">color:</span><span class="hl-3"> {</span><br/><span class="hl-3">        </span><span class="hl-4">description:</span><span class="hl-3"> </span><span class="hl-5">&quot;Color&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">choices:</span><span class="hl-3"> </span><span class="hl-4">Object</span><span class="hl-3">.</span><span class="hl-9">values</span><span class="hl-3">(</span><span class="hl-4">color</span><span class="hl-3">),</span><br/><span class="hl-3">        </span><span class="hl-4">demandOption:</span><span class="hl-3"> </span><span class="hl-1">true</span><span class="hl-3">,</span><br/><span class="hl-3">      },</span><br/><span class="hl-3">      </span><span class="hl-4">type:</span><span class="hl-3"> {</span><br/><span class="hl-3">        </span><span class="hl-4">description:</span><span class="hl-3"> </span><span class="hl-5">&quot;Type&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">choices:</span><span class="hl-3"> </span><span class="hl-4">Object</span><span class="hl-3">.</span><span class="hl-9">values</span><span class="hl-3">(</span><span class="hl-4">tipe</span><span class="hl-3">),</span><br/><span class="hl-3">        </span><span class="hl-4">demandOption:</span><span class="hl-3"> </span><span class="hl-1">true</span><span class="hl-3">,</span><br/><span class="hl-3">      },</span><br/><span class="hl-3">      </span><span class="hl-4">rare:</span><span class="hl-3"> {</span><br/><span class="hl-3">        </span><span class="hl-4">description:</span><span class="hl-3"> </span><span class="hl-5">&quot;Rare&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">choices:</span><span class="hl-3"> </span><span class="hl-4">Object</span><span class="hl-3">.</span><span class="hl-9">values</span><span class="hl-3">(</span><span class="hl-4">rare</span><span class="hl-3">),</span><br/><span class="hl-3">        </span><span class="hl-4">demandOption:</span><span class="hl-3"> </span><span class="hl-1">true</span><span class="hl-3">,</span><br/><span class="hl-3">      },</span><br/><span class="hl-3">      </span><span class="hl-4">rules:</span><span class="hl-3"> {</span><br/><span class="hl-3">        </span><span class="hl-4">description:</span><span class="hl-3"> </span><span class="hl-5">&quot;Rules&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">type:</span><span class="hl-3"> </span><span class="hl-5">&quot;string&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">demandOption:</span><span class="hl-3"> </span><span class="hl-1">true</span><span class="hl-3">,</span><br/><span class="hl-3">      },</span><br/><span class="hl-3">      </span><span class="hl-4">loyalty:</span><span class="hl-3"> {</span><br/><span class="hl-3">        </span><span class="hl-4">description:</span><span class="hl-3"> </span><span class="hl-5">&quot;Loyalty&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">type:</span><span class="hl-3"> </span><span class="hl-5">&quot;number&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">demandOption:</span><span class="hl-3"> </span><span class="hl-1">true</span><span class="hl-3">,</span><br/><span class="hl-3">      },</span><br/><span class="hl-3">      </span><span class="hl-4">value:</span><span class="hl-3"> {</span><br/><span class="hl-3">        </span><span class="hl-4">description:</span><span class="hl-3"> </span><span class="hl-5">&quot;Value&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">type:</span><span class="hl-3"> </span><span class="hl-5">&quot;number&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">demandOption:</span><span class="hl-3"> </span><span class="hl-1">true</span><span class="hl-3">,</span><br/><span class="hl-3">      },</span><br/><span class="hl-3">      </span><span class="hl-4">strRes:</span><span class="hl-3"> {</span><br/><span class="hl-3">        </span><span class="hl-4">description:</span><span class="hl-3"> </span><span class="hl-5">&quot;Strength/Resistance&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">type:</span><span class="hl-3"> </span><span class="hl-5">&quot;number&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">      },</span><br/><span class="hl-3">    },</span><br/><span class="hl-3">    (</span><span class="hl-4">argv</span><span class="hl-3">) </span><span class="hl-1">=&gt;</span><span class="hl-3"> {</span><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-9">isNaN</span><span class="hl-3">(</span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">id</span><span class="hl-3">)) {</span><br/><span class="hl-3">        </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">&quot;ID must be a number&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">      }</span><br/><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-1">typeof</span><span class="hl-3"> </span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">name</span><span class="hl-3"> !== </span><span class="hl-5">&quot;string&quot;</span><span class="hl-3">) {</span><br/><span class="hl-3">        </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">&quot;Name must be a string&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">      }</span><br/><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-9">isNaN</span><span class="hl-3">(</span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">manaCost</span><span class="hl-3">)) {</span><br/><span class="hl-3">        </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">&quot;Mana Cost must be a number&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">      }</span><br/><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (!</span><span class="hl-4">Object</span><span class="hl-3">.</span><span class="hl-9">values</span><span class="hl-3">(</span><span class="hl-4">color</span><span class="hl-3">).</span><span class="hl-9">includes</span><span class="hl-3">(</span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">color</span><span class="hl-3">)) {</span><br/><span class="hl-3">        </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">&quot;Color must be a valid color&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">      }</span><br/><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (!</span><span class="hl-4">Object</span><span class="hl-3">.</span><span class="hl-9">values</span><span class="hl-3">(</span><span class="hl-4">tipe</span><span class="hl-3">).</span><span class="hl-9">includes</span><span class="hl-3">(</span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">type</span><span class="hl-3">)) {</span><br/><span class="hl-3">        </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">&quot;Type must be a valid type&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">      }</span><br/><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (!</span><span class="hl-4">Object</span><span class="hl-3">.</span><span class="hl-9">values</span><span class="hl-3">(</span><span class="hl-4">rare</span><span class="hl-3">).</span><span class="hl-9">includes</span><span class="hl-3">(</span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">rare</span><span class="hl-3">)) {</span><br/><span class="hl-3">        </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">&quot;Rare must be a valid rare&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">      }</span><br/><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-1">typeof</span><span class="hl-3"> </span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">rules</span><span class="hl-3"> !== </span><span class="hl-5">&quot;string&quot;</span><span class="hl-3">) {</span><br/><span class="hl-3">        </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">&quot;Rules must be a string&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">      }</span><br/><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-9">isNaN</span><span class="hl-3">(</span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">loyalty</span><span class="hl-3">) &amp;&amp; </span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">type</span><span class="hl-3"> !== </span><span class="hl-4">tipe</span><span class="hl-3">.</span><span class="hl-4">planeswalker</span><span class="hl-3">) {</span><br/><span class="hl-3">        </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">&quot;Loyalty must be a number&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">      }</span><br/><span class="hl-3">      </span><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-9">isNaN</span><span class="hl-3">(</span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">value</span><span class="hl-3">)) {</span><br/><span class="hl-3">        </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">&quot;Value must be a number&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">      }</span><br/><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">strRes</span><span class="hl-3"> &amp;&amp; </span><span class="hl-9">isNaN</span><span class="hl-3">(</span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">strRes</span><span class="hl-3">)) {</span><br/><span class="hl-3">        </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">&quot;Strength/Resistance must be a number&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">      }</span><br/><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">strRes</span><span class="hl-3"> &amp;&amp; </span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">type</span><span class="hl-3"> !== </span><span class="hl-4">tipe</span><span class="hl-3">.</span><span class="hl-4">creature</span><span class="hl-3">) {</span><br/><span class="hl-3">        </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><br/><span class="hl-3">          </span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">&quot;Strength/Resistance is only for Creature type&quot;</span><span class="hl-3">),</span><br/><span class="hl-3">        );</span><br/><span class="hl-3">      }</span><br/><br/><span class="hl-3">      </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">type</span><span class="hl-3"> === </span><span class="hl-4">tipe</span><span class="hl-3">.</span><span class="hl-4">creature</span><span class="hl-3"> &amp;&amp; !</span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">strRes</span><span class="hl-3">) {</span><br/><span class="hl-3">        </span><span class="hl-2">throw</span><span class="hl-3"> </span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">red</span><span class="hl-3">(</span><br/><span class="hl-3">          </span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">Error</span><span class="hl-3">(</span><span class="hl-5">&quot;Creature type must have Strength/Resistance&quot;</span><span class="hl-3">),</span><br/><span class="hl-3">        );</span><br/><span class="hl-3">      }</span><br/><br/><span class="hl-3">      </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">card</span><span class="hl-3"> = </span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">magicCard</span><span class="hl-3">(</span><br/><span class="hl-3">        </span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">id</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">name</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">manaCost</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">color</span><span class="hl-3"> </span><span class="hl-2">as</span><span class="hl-3"> </span><span class="hl-8">color</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">type</span><span class="hl-3"> </span><span class="hl-2">as</span><span class="hl-3"> </span><span class="hl-8">tipe</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">rare</span><span class="hl-3"> </span><span class="hl-2">as</span><span class="hl-3"> </span><span class="hl-8">rare</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">rules</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">loyalty</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">value</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-4">argv</span><span class="hl-3">.</span><span class="hl-4">strRes</span><span class="hl-3">,</span><br/><span class="hl-3">      );</span><br/><span class="hl-3">      </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">json</span><span class="hl-3"> = </span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">jsonCards</span><span class="hl-3">();</span><br/><span class="hl-3">      </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-9">add</span><span class="hl-3">(</span><span class="hl-4">card</span><span class="hl-3">);</span><br/><span class="hl-3">    },</span><br/><span class="hl-3">  )</span><br/>
</code><button>Copy</button></pre>
          <p>
            Aquí vemos la implementación del comando add, con los diferentes
            parámetros necesarios para crear una carta, sus correspondientes
            condiciones, como que una carta
            <strong
              >solo puede tener resitencia/fuerza si es de tipo
              &#39;creature&#39; o que solo puede tener lealtad si es de tipo
              &#39;planeswalker&#39;</strong
            >.
          </p>
          <blockquote>
            <p>
              <strong><a href="#md:índice">Volver al índice</a></strong>
            </p>
          </blockquote>
          <a id="md:uso-servidor-cliente" class="tsd-anchor"></a>
          <h2><a href="#md:uso-servidor-cliente">Uso Servidor-Cliente.</a></h2>
          <p>
            En esta práctica se nos pide implementar un servidor que otorgue las
            funcionalidades anteriormente explicadas a clientes, para ello
            utilizaremos un nuevo fichero llamado server, en el que
            encontraremos la configuración del servidor, para implementar el
            cliente utilizaremos el mismo fichero que utilizabamos para los
            comandos, al ejecutar alguno de ellos se hará una solicitud a el
            servidor mediante el formato JSON.
          </p>
          <pre><code class="language-typescript"><span class="hl-3">    </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">json2</span><span class="hl-3"> =</span><span class="hl-5">`{</span><br/><span class="hl-5">      &quot;action&quot;: &quot;update&quot;,</span><br/><span class="hl-5">      &quot;card&quot;: {</span><br/><span class="hl-5">      &quot;user&quot;: &quot;</span><span class="hl-1">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">user</span><span class="hl-1">}</span><span class="hl-5">&quot;,</span><br/><span class="hl-5">      &quot;id&quot;: &quot;</span><span class="hl-1">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">id</span><span class="hl-1">}</span><span class="hl-5">&quot;,</span><br/><span class="hl-5">      &quot;name&quot;: &quot;</span><span class="hl-1">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">name</span><span class="hl-1">}</span><span class="hl-5">&quot;,</span><br/><span class="hl-5">      &quot;manaCost&quot;: &quot;</span><span class="hl-1">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">manaCost</span><span class="hl-1">}</span><span class="hl-5">&quot;,</span><br/><span class="hl-5">      &quot;color&quot;: &quot;</span><span class="hl-1">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">color</span><span class="hl-1">}</span><span class="hl-5">&quot;,</span><br/><span class="hl-5">      &quot;type&quot;: &quot;</span><span class="hl-1">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">type</span><span class="hl-1">}</span><span class="hl-5">&quot;,</span><br/><span class="hl-5">      &quot;rare&quot;: &quot;</span><span class="hl-1">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">rare</span><span class="hl-1">}</span><span class="hl-5">&quot;,</span><br/><span class="hl-5">      &quot;rules&quot;: &quot;</span><span class="hl-1">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">rules</span><span class="hl-1">}</span><span class="hl-5">&quot;,</span><br/><span class="hl-5">      &quot;value&quot;: &quot;</span><span class="hl-1">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">value</span><span class="hl-1">}</span><span class="hl-5">&quot;,</span><br/><span class="hl-5">      &quot;strRes&quot;: &quot;</span><span class="hl-1">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">strRes</span><span class="hl-1">}</span><span class="hl-5">&quot;,</span><br/><span class="hl-5">      &quot;loyalty&quot;: &quot;</span><span class="hl-1">${</span><span class="hl-4">argv</span><span class="hl-7">.</span><span class="hl-4">loyalty</span><span class="hl-1">}</span><span class="hl-5">&quot;}</span><br/><span class="hl-5">    }`</span><span class="hl-3">;</span>
</code><button>Copy</button></pre>
          <p>
            Vemos que el campo action indicará el servidor que debe hacer, y
            tenemos también la información necesaria para realizar la acción.
          </p>
          <pre><code class="language-typescript"><span class="hl-3">  </span><span class="hl-4">conection</span><span class="hl-3">.</span><span class="hl-9">on</span><span class="hl-3">(</span><span class="hl-5">&quot;data&quot;</span><span class="hl-3">, (</span><span class="hl-4">data</span><span class="hl-3">) </span><span class="hl-1">=&gt;</span><span class="hl-3"> {</span><br/><span class="hl-3">  </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-5">&quot;Data received&quot;</span><span class="hl-3">);</span><br/><span class="hl-3">  </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">json</span><span class="hl-3"> = </span><span class="hl-6">JSON</span><span class="hl-3">.</span><span class="hl-9">parse</span><span class="hl-3">(</span><span class="hl-4">data</span><span class="hl-3">.</span><span class="hl-9">toString</span><span class="hl-3">());</span><br/><span class="hl-3">  </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">action</span><span class="hl-3"> === </span><span class="hl-5">&quot;add&quot;</span><span class="hl-3">) {</span><br/><span class="hl-3">    </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">card</span><span class="hl-3"> = </span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">jsonCards</span><span class="hl-3">();</span><br/><span class="hl-3">    </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">magiCard</span><span class="hl-3"> = </span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">magicCard</span><span class="hl-3">(</span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">user</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">id</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">name</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">manaCost</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">color</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">typo</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">rare</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">rules</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">value</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">strRes</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">loyalty</span><span class="hl-3">);</span><br/><span class="hl-3">    </span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-9">add</span><span class="hl-3">(</span><span class="hl-4">magiCard</span><span class="hl-3">);</span><br/><span class="hl-3">    </span><span class="hl-4">conection</span><span class="hl-3">.</span><span class="hl-9">end</span><span class="hl-3">();</span><br/><span class="hl-3">  } </span><span class="hl-2">else</span><span class="hl-3"> </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">action</span><span class="hl-3"> === </span><span class="hl-5">&quot;showAll&quot;</span><span class="hl-3">) {</span><br/><span class="hl-3">    </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">card</span><span class="hl-3"> = </span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">jsonCards</span><span class="hl-3">();</span><br/><span class="hl-3">    </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">collection</span><span class="hl-3"> = </span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-9">showAllCards</span><span class="hl-3">(</span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">user</span><span class="hl-3">);</span><br/><span class="hl-3">    </span><span class="hl-2">if</span><span class="hl-3">(</span><span class="hl-4">collection</span><span class="hl-3">.</span><span class="hl-4">length</span><span class="hl-3"> !== </span><span class="hl-10">0</span><span class="hl-3">) {</span><br/><span class="hl-3">      </span><span class="hl-4">collection</span><span class="hl-3">.</span><span class="hl-9">forEach</span><span class="hl-3">((</span><span class="hl-4">cards</span><span class="hl-3">) </span><span class="hl-1">=&gt;</span><span class="hl-3"> {</span><br/><span class="hl-3">        </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">jsoncard</span><span class="hl-3"> = </span><span class="hl-6">JSON</span><span class="hl-3">.</span><span class="hl-9">stringify</span><span class="hl-3">(</span><span class="hl-4">cards</span><span class="hl-3">)</span><br/><span class="hl-3">        </span><span class="hl-4">conection</span><span class="hl-3">.</span><span class="hl-9">write</span><span class="hl-3">(</span><span class="hl-4">jsoncard</span><span class="hl-3">);</span><br/><span class="hl-3">      });</span><br/><span class="hl-3">    } </span><span class="hl-2">else</span><span class="hl-3"> {</span><br/><span class="hl-3">      </span><span class="hl-4">conection</span><span class="hl-3">.</span><span class="hl-9">write</span><span class="hl-3">(</span><span class="hl-5">`{&quot;error&quot;: &quot;Colección vacía.&quot;}`</span><span class="hl-3">)</span><br/><span class="hl-3">    }</span><br/><span class="hl-3">    </span><span class="hl-4">conection</span><span class="hl-3">.</span><span class="hl-9">end</span><span class="hl-3">();</span><br/><span class="hl-3">  } </span><span class="hl-2">else</span><span class="hl-3"> </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">action</span><span class="hl-3"> === </span><span class="hl-5">&quot;update&quot;</span><span class="hl-3">) {</span><br/><span class="hl-3">    </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">card</span><span class="hl-3"> = </span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">jsonCards</span><span class="hl-3">();</span><br/><span class="hl-3">    </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">magiCard</span><span class="hl-3"> = </span><span class="hl-1">new</span><span class="hl-3"> </span><span class="hl-9">magicCard</span><span class="hl-3">(</span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">user</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">id</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">name</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">manaCost</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">color</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">typo</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">rare</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">rules</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">value</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">strRes</span><span class="hl-3">, </span><span class="hl-4">json</span><span class="hl-3">.</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">loyalty</span><span class="hl-3">);</span><br/><span class="hl-3">    </span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-9">update</span><span class="hl-3">(</span><span class="hl-4">magiCard</span><span class="hl-3">);</span><br/><span class="hl-3">    </span><span class="hl-4">conection</span><span class="hl-3">.</span><span class="hl-9">end</span><span class="hl-3">();</span>
</code><button>Copy</button></pre>
          <p>
            Además tras realizar las acciones vemos como el servidor corta la
            conección con el cliente.
          </p>
          <blockquote>
            <p>
              <strong><a href="#md:índice">Volver al índice</a></strong>
            </p>
          </blockquote>
          <a id="md:cambios-de-código-base" class="tsd-anchor"></a>
          <h2>
            <a href="#md:cambios-de-código-base">Cambios de código base</a>
          </h2>
          <p>
            En cuanto el código base hemos tenido que cambiar un par de
            funciones, por ejemplo la funcion show que mostraba una carta y la
            funcion showAll que mostraba la colección interna deben de devolver
            los json necesarios para que le server pueda enviar esa informaión
            al cliente.
          </p>
          <pre><code class="language-typescript"><span class="hl-3">  </span><span class="hl-9">showCard</span><span class="hl-3">(</span><span class="hl-4">cardUser</span><span class="hl-3">:</span><span class="hl-4">string</span><span class="hl-3">, </span><span class="hl-4">showIDCard</span><span class="hl-3">: </span><span class="hl-4">number</span><span class="hl-3">) {</span><br/><span class="hl-3">  </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">filePath</span><span class="hl-3"> = </span><span class="hl-5">`</span><span class="hl-1">${</span><span class="hl-4">directorioUsuario</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">cardUser</span><span class="hl-1">}</span><span class="hl-5">/</span><span class="hl-1">${</span><span class="hl-4">showIDCard</span><span class="hl-1">}</span><span class="hl-5">.json`</span><span class="hl-3">;</span><br/><span class="hl-3">  </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">existsSync</span><span class="hl-3">(</span><span class="hl-4">filePath</span><span class="hl-3">)) {</span><br/><span class="hl-3">    </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">green</span><span class="hl-3">(</span><span class="hl-5">&quot;Showing card&quot;</span><span class="hl-3">));</span><br/><span class="hl-3">    </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">cardData</span><span class="hl-3"> = </span><span class="hl-4">fs</span><span class="hl-3">.</span><span class="hl-9">readFileSync</span><span class="hl-3">(</span><span class="hl-4">filePath</span><span class="hl-3">, </span><span class="hl-5">&quot;utf-8&quot;</span><span class="hl-3">);</span><br/><span class="hl-3">    </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">card</span><span class="hl-3"> = </span><span class="hl-6">JSON</span><span class="hl-3">.</span><span class="hl-9">parse</span><span class="hl-3">(</span><span class="hl-4">cardData</span><span class="hl-3">);</span><br/><span class="hl-3">    </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`ID: </span><span class="hl-1">${</span><span class="hl-4">showIDCard</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">    </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Name: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">name_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">    </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Mana Cost: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">manaCost_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">    </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Color: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">color_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">    </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Type: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">type_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">    </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Rare: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">rare_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">    </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Rules: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">rules_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">    </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Loyalty: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">loyalty_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">    </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Value: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">value_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">    </span><span class="hl-2">if</span><span class="hl-3"> (</span><span class="hl-4">card</span><span class="hl-3">.</span><span class="hl-4">strRes_</span><span class="hl-3">) {</span><br/><span class="hl-3">      </span><span class="hl-4">console</span><span class="hl-3">.</span><span class="hl-9">log</span><span class="hl-3">(</span><span class="hl-4">chalk</span><span class="hl-3">.</span><span class="hl-9">blue</span><span class="hl-3">(</span><span class="hl-5">`Strength/Resistance: </span><span class="hl-1">${</span><span class="hl-4">card</span><span class="hl-7">.</span><span class="hl-4">strRes_</span><span class="hl-1">}</span><span class="hl-5">`</span><span class="hl-3">));</span><br/><span class="hl-3">    }</span><br/><span class="hl-3">    </span><span class="hl-2">return</span><span class="hl-3"> </span><span class="hl-4">card</span><span class="hl-3">;</span><br/><span class="hl-3">  } </span><span class="hl-2">else</span><span class="hl-3"> {</span><br/><span class="hl-3">    </span><span class="hl-0">//creando un json con un campo error.</span><br/><span class="hl-3">    </span><span class="hl-1">const</span><span class="hl-3"> </span><span class="hl-6">json</span><span class="hl-3"> = </span><span class="hl-5">`&quot;error&quot;: &quot;Not  found card in </span><span class="hl-1">${</span><span class="hl-4">cardUser</span><span class="hl-1">}</span><span class="hl-5"> collection&quot;`</span><span class="hl-3">;</span><br/><span class="hl-3">    </span><span class="hl-2">return</span><span class="hl-3"> </span><span class="hl-4">json</span><span class="hl-3">;</span><br/><span class="hl-3">  }</span><br/><span class="hl-3">} </span>
</code><button>Copy</button></pre>
          <p>
            Vemos como esta función devuelve un json, ya sea con la carta a
            mostrar o con un error.
          </p>
          <a id="md:problemas" class="tsd-anchor"></a>
          <h2><a href="#md:problemas">Problemas</a></h2>
          <p>
            <strong
              >Nos surgen algunos problemas por la poca experiencia en el
              entorno y con las nombradas librerías, pese a la clara
              documentación de estas:</strong
            >
          </p>
          <ul>
            <li>
              <strong>chalk</strong> Debemos de usar ESM en vez de commonJS,
              esto nos hizo tener problemas con la acción de coveralls, ya que
              intentabamos realizar las pruebas con nyc, como ya sabemos este
              moodulo no trabaja con ESM, hay que utilizar c8.
            </li>
          </ul>
          <p>
            -<strong>yargs</strong> El problema surge con las variables de tipo
            enum.
          </p>
          <pre><code class="language-typescript"><span class="hl-3">      </span><span class="hl-11">type</span><span class="hl-3">: {</span><br/><span class="hl-3">        </span><span class="hl-11">description</span><span class="hl-3">: </span><span class="hl-5">&quot;Type&quot;</span><span class="hl-3">,</span><br/><span class="hl-3">        </span><span class="hl-11">choices</span><span class="hl-3">: </span><span class="hl-4">Object</span><span class="hl-3">.</span><span class="hl-9">values</span><span class="hl-3">(</span><span class="hl-4">tipe</span><span class="hl-3">),</span><br/><span class="hl-3">        </span><span class="hl-11">demandOption</span><span class="hl-3">: </span><span class="hl-1">true</span><span class="hl-3">,</span><br/><span class="hl-3">      },</span>
</code><button>Copy</button></pre>
          <p>
            Hay que establecer un campo choices, en vez de type ya que el tipo
            del dato es una eleccion de un enum.
          </p>
          <ul>
            <li>
              <strong>fs</strong> Pese a lo clara que es la documentación y lo
              facil que es de usar nos surgen algunos problemas con respecto a
              los objetos y la leectura de json, una vez comprendido el
              funcionamiento de <code>JSON.stringfy</code> y de
              <code>JSON.parse</code> fue bastante sencillo trabajar con la API.
            </li>
          </ul>
          <blockquote>
            <p>
              <strong><a href="#md:índice">Volver al índice</a></strong>
            </p>
          </blockquote>
          <a id="md:referencias" class="tsd-anchor"></a>
          <h2><a href="#md:referencias">Referencias</a></h2>
          <p>
            <a href="https://www.npmjs.com/package/yargs">Yargs</a>
            <a href="https://www.npmjs.com/package/chalk">chalk</a>
            <a href="https://nodejs.org/api/fs.html">fs</a>
            <a href="#md:https://github.com/marketplace/actions/sonarcloud-scan"
              >SonarCloud</a
            >
            <a
              href="https://ull-esit-inf-dsi-2324.github.io/prct09-fiilesystem-magic-app/"
              >EnunciadoP09</a
            >
          </p>
          <blockquote>
            <p>
              <strong><a href="#md:índice">Volver al índice</a></strong>
            </p>
          </blockquote>
          <a id="md:anexos" class="tsd-anchor"></a>
          <h2><a href="#md:anexos">Anexos</a></h2>
          <p>
            <a
              href="#md:https://learning-oreilly-com.accedys2.bbtk.ull.es/library/view/essential-typescript-from/9781484249796/html/481342_1_En_1_Chapter.xhtml"
              >Essential TypeScript</a
            >
          </p>
          <blockquote>
            <p>
              <strong><a href="#md:índice">Volver al índice</a></strong>
            </p>
          </blockquote>
        </div>
      </div>
      <div class="col-sidebar">
        <div class="page-menu">
          <div class="tsd-navigation settings">
            <details class="tsd-index-accordion">
              <summary class="tsd-accordion-summary">
                <h3>
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <use href="assets/icons.svg#icon-chevronDown"></use></svg
                  >Settings
                </h3>
              </summary>
              <div class="tsd-accordion-details">
                <div class="tsd-filter-visibility">
                  <h4 class="uppercase">Member Visibility</h4>
                  <form>
                    <ul id="tsd-filter-options">
                      <li class="tsd-filter-item">
                        <label class="tsd-filter-input"
                          ><input
                            type="checkbox"
                            id="tsd-filter-protected"
                            name="protected"
                          /><svg
                            width="32"
                            height="32"
                            viewBox="0 0 32 32"
                            aria-hidden="true"
                          >
                            <rect
                              class="tsd-checkbox-background"
                              width="30"
                              height="30"
                              x="1"
                              y="1"
                              rx="6"
                              fill="none"
                            ></rect>
                            <path
                              class="tsd-checkbox-checkmark"
                              d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25"
                              stroke="none"
                              stroke-width="3.5"
                              stroke-linejoin="round"
                              fill="none"
                            ></path></svg
                          ><span>Protected</span></label
                        >
                      </li>
                      <li class="tsd-filter-item">
                        <label class="tsd-filter-input"
                          ><input
                            type="checkbox"
                            id="tsd-filter-private"
                            name="private"
                          /><svg
                            width="32"
                            height="32"
                            viewBox="0 0 32 32"
                            aria-hidden="true"
                          >
                            <rect
                              class="tsd-checkbox-background"
                              width="30"
                              height="30"
                              x="1"
                              y="1"
                              rx="6"
                              fill="none"
                            ></rect>
                            <path
                              class="tsd-checkbox-checkmark"
                              d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25"
                              stroke="none"
                              stroke-width="3.5"
                              stroke-linejoin="round"
                              fill="none"
                            ></path></svg
                          ><span>Private</span></label
                        >
                      </li>
                      <li class="tsd-filter-item">
                        <label class="tsd-filter-input"
                          ><input
                            type="checkbox"
                            id="tsd-filter-inherited"
                            name="inherited"
                            checked
                          /><svg
                            width="32"
                            height="32"
                            viewBox="0 0 32 32"
                            aria-hidden="true"
                          >
                            <rect
                              class="tsd-checkbox-background"
                              width="30"
                              height="30"
                              x="1"
                              y="1"
                              rx="6"
                              fill="none"
                            ></rect>
                            <path
                              class="tsd-checkbox-checkmark"
                              d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25"
                              stroke="none"
                              stroke-width="3.5"
                              stroke-linejoin="round"
                              fill="none"
                            ></path></svg
                          ><span>Inherited</span></label
                        >
                      </li>
                      <li class="tsd-filter-item">
                        <label class="tsd-filter-input"
                          ><input
                            type="checkbox"
                            id="tsd-filter-external"
                            name="external"
                          /><svg
                            width="32"
                            height="32"
                            viewBox="0 0 32 32"
                            aria-hidden="true"
                          >
                            <rect
                              class="tsd-checkbox-background"
                              width="30"
                              height="30"
                              x="1"
                              y="1"
                              rx="6"
                              fill="none"
                            ></rect>
                            <path
                              class="tsd-checkbox-checkmark"
                              d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25"
                              stroke="none"
                              stroke-width="3.5"
                              stroke-linejoin="round"
                              fill="none"
                            ></path></svg
                          ><span>External</span></label
                        >
                      </li>
                    </ul>
                  </form>
                </div>
                <div class="tsd-theme-toggle">
                  <h4 class="uppercase">Theme</h4>
                  <select id="tsd-theme">
                    <option value="os">OS</option>
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                  </select>
                </div>
              </div>
            </details>
          </div>
          <details open class="tsd-index-accordion tsd-page-navigation">
            <summary class="tsd-accordion-summary">
              <h3>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <use href="assets/icons.svg#icon-chevronDown"></use></svg
                >On This Page
              </h3>
            </summary>
            <div class="tsd-accordion-details">
              <a
                href="#md:práctica-10--aplicación-para-coleccionistas-de-cartas-magic-cliente-servidor"
                ><span
                  >PRÁCTICA 10 : <wbr />Aplicación para coleccionistas de cartas
                  magic <wbr />Cliente-<wbr />Servidor.</span
                ></a
              >
              <ul>
                <li>
                  <a href="#md:índice"><span>Índice</span></a>
                </li>
                <li>
                  <a href="#md:resumen"><span>Resumen</span></a>
                </li>
                <li>
                  <a href="#md:apartados"><span>Apartados</span></a>
                </li>
                <li>
                  <ul>
                    <li>
                      <a href="#md:planteamiento-del-trabajo"
                        ><span>Planteamiento del trabajo</span></a
                      >
                    </li>
                    <li>
                      <a href="#md:uso-de-chalk"><span>Uso de chalk</span></a>
                    </li>
                    <li>
                      <a href="#md:uso-de-fs"><span>Uso de fs</span></a>
                    </li>
                    <li>
                      <a href="#md:uso-de-yargs"><span>Uso de yargs</span></a>
                    </li>
                  </ul>
                </li>
                <li>
                  <a href="#md:uso-servidor-cliente"
                    ><span>Uso <wbr />Servidor-<wbr />Cliente.</span></a
                  >
                </li>
                <li>
                  <a href="#md:cambios-de-código-base"
                    ><span>Cambios de código base</span></a
                  >
                </li>
                <li>
                  <a href="#md:problemas"><span>Problemas</span></a>
                </li>
                <li>
                  <a href="#md:referencias"><span>Referencias</span></a>
                </li>
                <li>
                  <a href="#md:anexos"><span>Anexos</span></a>
                </li>
              </ul>
            </div>
          </details>
        </div>
        <div class="site-menu">
          <nav class="tsd-navigation">
            <a href="index.html" class="current"
              ><svg class="tsd-kind-icon" viewBox="0 0 24 24">
                <use href="assets/icons.svg#icon-1"></use></svg
              ><span>doc-test</span></a
            >
            <ul
              class="tsd-small-nested-navigation"
              id="tsd-nav-container"
              data-base="."
            >
              <li>Loading...</li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
    <div class="tsd-generator">
      <p>
        Generated using
        <a href="https://typedoc.org/" target="_blank">TypeDoc</a>
      </p>
    </div>
    <div class="overlay"></div>
  </body>
</html>
